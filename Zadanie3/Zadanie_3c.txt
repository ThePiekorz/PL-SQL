CREATE OR REPLACE TRIGGER TRG_MIASTA_BEFORE_DELETE
BEFORE DELETE ON MIASTA
FOR EACH ROW
DECLARE
	zlicz NUMBER;
BEGIN
	SELECT COUNT(*) INTO zlicz FROM OSOBY WHERE MIASTO =
:OLD.NAZWA_MIASTA;
	IF zlicz > 0 THEN
		RAISE_APPLICATION_ERROR(-20001, 'Nie można usunąć, powiązane rekordy');
	END IF;
END;
/